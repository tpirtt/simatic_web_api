<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simatic Web API Demo</title>
</head>
<body>
    <h2>Simatic Web API Session</h2>

    <button id="loginBtn">Login</button>
    <button id="pingBtn">Ping</button>
    <button id="logoutBtn">Logout</button>

    <pre id="output">Waiting for action...</pre>

    <script type="module">
        import { WebApiSession } from './simatic_web_api.js';

        // Change these credentials as needed
        const session = new WebApiSession("192.168.0.1", "admin", "Siemens1234!");

        const output = document.getElementById('output');

        async function runLogin() {
            const token = await session.login();
            output.textContent = token ? `Login successful!\nToken: ${token}` : 'Login failed.';
        }

        async function runPing() {
            const result = await session.ping();
            output.textContent = result ? `Ping successful:\n${JSON.stringify(result, null, 4)}` : 'Ping failed.';
        }

        async function runLogout() {
            const success = await session.logout();
            output.textContent = success ? 'Logout successful.' : 'Logout failed.';
        }

        document.getElementById('loginBtn').addEventListener('click', runLogin);
        document.getElementById('pingBtn').addEventListener('click', runPing);
        document.getElementById('logoutBtn').addEventListener('click', runLogout);
    </script>
</body>
</html>
